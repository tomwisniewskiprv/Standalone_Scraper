{% extends "base.html" %}
{% load static %}
{% block content %}

    {% comment %}
# TODO
- dodać ciastecza zapamiętujące która grupa
- stworzyć menu zamykane dla wyboru grupy i tygodnia
- zamkąć wyniki w tabach A1 - A2 - B3 - B4
{% endcomment %}

    <div class="row">
        <div class="col-xs-7">
            <h2 class="orbitron text-center"><strong>SKRAPER</strong></h2>
        </div>
        <div class="col-xs-2">
            <h6 class="russo text-center">beta</h6>
        </div>
        <div class="col-xs-3">
            <img src="{% static "python-logo-200.png" %}" class="img-responsive text-center">
        </div>
    </div>
    <hr style="padding: 3px; margin: 0;">


    <div class="row">
        <form method="POST" id="form_scraper">
            {% csrf_token %}
            <div class="col-xs-12">

                <label class="radio-inline"><input type="radio" name="group" value="A1" checked hidden></label>

                <button type="submit" form="form_scraper" value="current" class="btn btn-lg btn-block">Sprawdź bieżący plan
                </button>
                <hr>
            </div>
            <div class="col-xs-12">
                <button type="submit" form="form_scraper" value="current" class="btn btn-lg">Wybierz inny tydzień</button>
                {% if weeks %}
                    <label>
                        <select name="week">
                            {% for value, week in weeks %}
                                <option value="{{ value }}">{{ week }}</option>
                            {% endfor %}
                        </select>
                    </label>
                {% endif %}
            </div>
        </form>
    </div>







    <br>

    {% comment %}TAB MENU{% endcomment %}
    <div class="row">
        <div class="col-xs-12">

            {% comment %} #DEBUG
            <hr>
            {{ gschedule.A1 }}
            <hr>
            {{ gschedule.A1.0 }}
            <hr>
            {{ gschedule.A1.0.Friday }}
            <hr>

            {% for grp in gschedule.A1 %}
                {{ grp.Friday }}<br>
                {{ grp.Saturday }}<br>
                {{ grp.Sunday }}<br>
            {% endfor %}{% endcomment %}

            {% if gschedule %}

                <ul class="nav nav-tabs">
                    <li><a href="#" class="orbitron"> <<</a></li>
                    {% for group, plan in gschedule.items %}
                        {% comment %}<li class="active"><a data-toggle="tab" href="{{ group }}">{{ group }} %}</a></li>{% endcomment %}
                        <li><a data-toggle="tab" href="#{{ group }}" class="orbitron">{{ group }}</a></li>
                    {% endfor %}
                    <li><a href="#" class="orbitron"> >></a></li>
                </ul>

                <div class="tab-content">
                    {% for group, plan in gschedule.items %}
                        <div id="{{ group }}" class="tab-pane fade">

                            <h4>Plan na <code> {% for w in weeks %}{% if w.0 == selected_week %}{{ w.1 }}
                            {% endif %}{% endfor %}</code> dla grupy <code> {{ group }}</code></h4>

                            {% for day, classes in plan.0.items %}
                                {% comment %}plan.0 is schedule, plan.1 are lecturers{% endcomment %}
                                {% if classes|length > 0 %}
                                    <div class="panel-group">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h4 class="panel-title">
                                                    <a data-toggle="collapse" href="#{{ day }}{{ group }}">
                                                        {% if day == "Friday" %}Piątek
                                                        {% elif day == "Saturday" %}Sobota
                                                        {% elif day == "Sunday" %}Niedziela
                                                        {% endif %}
                                                    </a>
                                                </h4>
                                            </div>
                                            <div id="{{ day }}{{ group }}" class="panel-collapse collapse">
                                                <div class="panel-body">
                                                    {% for data in classes %}
                                                        <pre>{{ data }}</pre>
                                                    {% endfor %}
                                                </div>
                                                {% comment %}<div class="panel-footer">Panel Footer</div>{% endcomment %}
                                            </div>
                                        </div>
                                    </div>
                                    {% comment %} PANEL END {% endcomment %}


                                {% else %}
                                    <div class="panel-group">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h4 class="panel-title">
                                                    {% if day == "Friday" %}Piątek
                                                    {% elif day == "Saturday" %}Sobota
                                                    {% elif day == "Sunday" %}Niedziela {% endif %}
                                                    nie ma zajęć, yay!</h4>
                                            </div>
                                        </div>
                                    </div>

                                {% endif %}
                            {% endfor %}

                        </div>
                    {% endfor %}

            </div>

            {% else %}
                    <pre>Nie ma zajęć w tym dniu.</pre>
            {% endif %}

        </div>
    </div>
    {% comment %}TAB MENU{% endcomment %}

    {% comment %} WYNIKI {% endcomment %}
    {% comment %}
    <div class="row">
        <div class="col-xs-12">
            {% if schedule %}

                <h4>Plan na
                    <code>
                        {% for w in weeks %}{% if w.0 == selected_week %}{{ w.1 }}{% endif %}{% endfor %}</code>
                    dla grupy <code> {{ group }}</code>
                </h4>

                {% for key, classes in schedule.items %}
                    {% if classes|length > 0 %}
                        <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#{{ key }}">
                                            {% if key == "Friday" %}Piątek
                                            {% elif key == "Saturday" %}Sobota
                                            {% elif key == "Sunday" %}Niedziela
                                            {% endif %}
                                        </a>
                                    </h4>
                                </div>
                                <div id="{{ key }}" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        {% for class in classes %}
                                            <pre> {{ class }} </pre>
                                        {% endfor %}
                                    </div>
                                    <div class="panel-footer">Panel Footer</div>
                                </div>
                            </div>
                        </div>

                    {% else %}
                        <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        {% if key == "Friday" %}Piątek
                                        {% elif key == "Saturday" %}Sobota
                                        {% elif key == "Sunday" %}Niedziela
                                        {% endif %}
                                        nie ma zajęć, yay!</h4></div>
                            </div>
                        </div>

                    {% endif %}
                {% endfor %}

            {% else %}
                <pre>Nie ma zajęć w tym dniu.</pre>
            {% endif %}
        </div>
    </div>
   {% endcomment %} {% comment %} WYNIKI {% endcomment %}


    {% comment %}    {% if lecturers %}
        <div class="row">
            <div class="col-xs-12">

                <table class="table">
                    <tr class="success">
                        <th>Prowadzący:</th>
                        <th>&nbsp;</th>
                        <th>&nbsp;</th>
                    </tr>
                    {% for class, lecturer in lecturers.items %}
                        <tr>
                            <td>{{ class }}</td>
                            <td>&nbsp;</td>
                            <td>{{ lecturer }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    {% endif %}{% endcomment %}

{% endblock content %}
