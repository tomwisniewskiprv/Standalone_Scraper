{% extends "base.html" %}
{% load static %}
{% block content %}

    <div class="row">
        <div class="col-xs-6">
            <h2><strong>SKRAPER</strong></h2>
            <small>beta</small>
        </div>
        <div class="col-xs-3">
            <img src="{% static "scraper.png" %}" class="img-responsive">
        </div>
        <div class="col-xs-3">
            <img src="{% static "python-logo-200.png" %}" class="img-responsive">
        </div>
    </div>
    <hr style="padding: 3px; margin: 0;">
    <div class="row">
        <form method="POST" id="form_scraper">
            {% csrf_token %}
            <div class="col-xs-12">
                <h4>Sprawdź bieżący plan dla grupy:</h4>
            </div>
            <div class="col-xs-8">

                <p>
                    <label class="radio-inline">
                        <input type="radio" name="group" value="A1" checked>A 1
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="group" value="A2">A 2
                    </label>
                </p>
                <p>
                    <label class="radio-inline">
                        <input type="radio" name="group" value="B3">B 3
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="group" value="B4">B 4
                    </label>
                </p>


            </div>
            <div class="col-xs-4">
                <button type="submit" form="form_scraper" value="current" class="btn btn-lg">GO !</button>
            </div>
            <div class="col-xs-12"><h4>lub wybierz inny tydzień</h4></div>
            <div class="col-xs-8">
                {% if weeks %}
                    <label>
                        <select name="week">
                            {% for value, week in weeks %}
                                <option value="{{ value }}">{{ week }}</option>
                            {% endfor %}
                        </select>
                    </label>
                {% endif %}
            </div>
            <div class="col-xs-4">
                <button type="submit" form="form_scraper" value="current" class="btn btn-lg">GO !</button>
            </div>
        </form>
    </div>

    <br>

    <div class="row">
        <div class="col-xs-12">
            {% if schedule %}

                <h4>Plan na
                    <code>
                        {% for w in weeks %}{% if w.0 == selected_week %}{{ w.1 }}{% endif %}{% endfor %}</code>
                    dla grupy <code> {{ group }}</code>
                </h4>

                {% for key, classes in schedule.items %}
                    {% if classes|length > 0 %}
                        <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#{{ key }}">
                                            {% if key == "Friday" %}Piątek
                                            {% elif key == "Saturday" %}Sobota
                                            {% elif key == "Sunday" %}Niedziela
                                            {% endif %}
                                        </a>
                                    </h4>
                                </div>
                                <div id="{{ key }}" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        {% for class in classes %}
                                            <pre> {{ class }} </pre>
                                        {% endfor %}
                                    </div>
                                    {% comment %}<div class="panel-footer">Panel Footer</div>{% endcomment %}
                                </div>
                            </div>
                        </div>

                    {% else %}
                        <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        {% if key == "Friday" %}Piątek
                                        {% elif key == "Saturday" %}Sobota
                                        {% elif key == "Sunday" %}Niedziela
                                        {% endif %}
                                        nie ma zajęć, yay!</h4></div>
                            </div>
                        </div>

                    {% endif %}
                {% endfor %}

            {% else %}
                <pre>Nie ma zajęć w tym dniu.</pre>
            {% endif %}
        </div>
    </div>

    {% if lecturers %}
        <div class="row">
            <div class="col-xs-12">

                <table class="table">
                    <tr class="success">
                        <th>Prowadzący:</th>
                        <th>&nbsp;</th>
                        <th>&nbsp;</th>
                    </tr>
                    {% for class, lecturer in lecturers.items %}
                        <tr>
                            <td>{{ class }}</td>
                            <td>&nbsp;</td>
                            <td>{{ lecturer }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    {% endif %}

{% endblock content %}
